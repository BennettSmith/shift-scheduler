# Troop 900 Tree Lot Shift Scheduler
## Use Cases Document

**Version:** 1.0  
**Date:** December 2024  
**Purpose:** This document describes what the Troop 900 Tree Lot Shift Scheduler does from a user's perspective. It covers all functional use cases organized by category.

---

## Table of Contents

1. [Overview](#overview)
2. [System Bootstrap](#system-bootstrap)
3. [Family Onboarding](#family-onboarding)
4. [Shift Template Management & Schedule Creation](#shift-template-management--schedule-creation)
5. [Committee Operations](#committee-operations)
6. [Shift Scheduling](#shift-scheduling)
7. [Multi-Household Support](#multi-household-support)
8. [Attendance Tracking](#attendance-tracking)
9. [Walk-In Coverage](#walk-in-coverage)
10. [Hours Tracking & Leaderboards](#hours-tracking--leaderboards)
11. [End-of-Season Reports](#end-of-season-reports)
12. [Schedule Management & Staffing Views](#schedule-management--staffing-views)
13. [Profile Management](#profile-management)
14. [Privacy & Data Requests](#privacy--data-requests)
15. [Permission Summary](#permission-summary)
16. [Business Rules](#business-rules)

---

## Overview

The Troop 900 Tree Lot Shift Scheduler is a mobile application designed to manage volunteer scheduling for Boy Scout Troop 900's annual Christmas tree lot fundraiser. The system enables families to sign up for shifts, track attendance, view hours worked, and coordinate schedules across the 4-6 week fundraising season.

### Key Capabilities

- Passwordless authentication using Sign in with Apple and Google
- Multi-household family structures supporting divorced parents, joint custody, and blended families
- Role-based access for Admins, Committee Members, Parents, and Scouts
- Shift template management for efficient schedule creation
- Real-time shift scheduling with permission boundaries
- In-app attendance tracking replacing paper sign-in sheets
- Walk-in coverage for handling no-shows
- Individual and family hours tracking with leaderboards
- Scout Bucks reporting for end-of-season credit calculations

### User Base

Approximately 40-50 users (scouts and parents) from 15-20 families/households.

---

## System Bootstrap

### Use Case 0: Creating the First Administrator

**Actors:** Troop Leadership (designated first admin), Technical Setup Person

**Description:** Before the system can be used, the very first administrator account must be established. This is a one-time setup that occurs when the system is initially deployed. Since the system uses passwordless authentication (Sign in with Apple/Google) and all other accounts require invite codes generated by an admin, a special bootstrap process is needed to create that first admin.

**Preconditions:**
- The application has been deployed (Firebase project configured, apps published)
- No administrator accounts exist in the system yet
- The designated first admin's email address is known

**What Happens:**
1. During initial system deployment, the designated first admin's email address is registered as the bootstrap administrator
2. The designated person downloads the app and signs in using Apple or Google (with the registered email)
3. System recognizes this as the bootstrap email and automatically grants administrator privileges
4. The new admin completes their profile
5. The bootstrap mechanism is disabled—no additional accounts can be created this way
6. The admin can now generate invite codes for other families and assign committee roles to other users

**Security Considerations:**
- The bootstrap email must be configured before the system goes live
- Only ONE account can be created through bootstrap
- Once the first admin exists, all subsequent users must use the standard invite code flow
- The first admin can promote other users to admin or committee roles as needed

**Outcome:** 
- The system has its first administrator who can begin onboarding families
- The bootstrap path is closed; all future accounts require invite codes
- The admin can delegate by creating additional admins or committee members

---

## Family Onboarding

### Use Case 1: New Family Joins

**Actors:** Admin, Primary Parent, Scout(s)

**Description:** A new family joins the system using an invite code provided by the Admin.

**What Happens:**
1. Admin generates a unique invite code for the family and shares it (typically via text message)
2. Primary parent downloads the app and signs in using Apple or Google authentication
3. Parent enters the invite code to create their family account
4. Parent completes their profile with optional contact information
5. Parent adds family members (spouse, scouts) to the household
6. Each scout receives a claim code that can be used later when they're ready for independent access
7. Parent can immediately begin signing up family members for available shifts

**Outcome:** Family is established in the system with the primary parent having full management capabilities. Scouts are initially managed by parents until they claim their profiles.

---

### Use Case 2: Scout Claims Profile

**Actors:** Scout (typically teenager)

**Description:** A scout who was previously managed by parents gains independent access to the system.

**What Happens:**
1. Scout downloads the app (typically when they get their own phone or email)
2. Scout signs in using Apple or Google authentication
3. Scout enters their claim code (provided by parent when profile was created)
4. System links the scout's new authentication to their existing profile
5. Scout gains independent access to manage their own schedule

**Outcome:** 
- Scout can now sign themselves up for shifts and cancel their own assignments
- Parents can still VIEW the scout's schedule
- Parents can NO LONGER sign up the scout or cancel their assignments
- Scout maintains visibility of family calendar

---

### Use Case 7: Parent Adds Spouse

**Actors:** Primary Parent, Spouse

**Description:** A spouse or co-parent is added to share family management responsibilities.

**What Happens:**
1. Primary parent adds spouse to the family as a "Spouse/Co-Parent" member type
2. System generates a claim code for the spouse
3. Primary parent shares the claim code with spouse
4. Spouse downloads app, signs in, and enters claim code
5. Spouse gains full family management permissions

**Outcome:** Both parents can now manage family members, sign up scouts for shifts, and share scheduling duties equally.

---

## Shift Template Management & Schedule Creation

### Use Case 20: Committee Creates Shift Templates

**Actors:** Committee Member

**Description:** Committee creates reusable shift templates that define standard shift patterns for different days and occasions.

**What Happens:**
1. Committee member accesses template management
2. Reviews existing templates from prior seasons (if available)
3. Creates new templates or updates existing ones with:
   - Template name and type (weekday, weekend, special event)
   - Which days of the week the template applies to
   - Shift times for the day
   - Number of scouts and parents required per shift
4. Templates can be deactivated but remain available for historical reference

**Template Types:**
- **Weekday Standard:** Monday-Thursday pattern with after-school and evening shifts
- **Friday Extended:** Friday pattern potentially with later hours
- **Weekend Full Day:** Saturday-Sunday pattern with multiple shifts throughout the day
- **Special Events:** Lot Setup Day, Tree Delivery Day, Christmas Eve, etc.

**Outcome:** Templates are saved for reuse across seasons. Changes to templates do not affect previously generated schedules—only new schedules created with the template.

---

### Use Case 21: Committee Generates Season Schedule (Bulk Creation)

**Actors:** Committee Chair

**Description:** Committee generates the entire season's shifts in one operation using templates.

**What Happens:**
1. Committee member starts a new season schedule
2. Configures the season with:
   - Season name (e.g., "2024 Tree Lot")
   - Start and end dates (e.g., Nov 29 - Dec 24)
   - Default location
3. Selects which templates to apply:
   - Regular templates automatically apply based on day of week
   - Special event templates are assigned to specific dates
4. Adds exceptions (closed days like Thanksgiving)
5. Reviews the preview showing total shifts and volunteer slots needed
6. Confirms generation

**Outcome:** 
- All shifts are created in "draft" mode (typically 70+ shifts in seconds)
- NO notifications are sent to users
- Committee can review and adjust before publishing
- Special event shifts (Lot Setup, Tree Delivery) are created with higher volunteer requirements

---

### Use Case 22: Committee Reviews and Adjusts Draft Schedule

**Actors:** Committee Member

**Description:** Committee reviews the generated schedule and makes adjustments before publishing.

**What Happens:**
1. Committee member browses the draft schedule by date
2. Reviews shifts for accuracy:
   - Check volunteer requirements
   - Verify timing
   - Review special event configurations
3. Makes adjustments as needed:
   - Modify volunteer requirements for specific shifts (e.g., reduce for days with known conflicts)
   - Add extra shifts not covered by templates
   - Remove or adjust shifts as needed
4. Changes remain in draft mode

**Outcome:** Schedule is refined and ready for publication. No notifications sent during this phase.

---

### Use Case 23: Committee Publishes Schedule

**Actors:** Committee Chair

**Description:** Committee publishes the entire season schedule, making it visible to all users.

**What Happens:**
1. Committee reviews final summary (total shifts, volunteer slots, special events)
2. Confirms publication with options to:
   - Send notification to all users
   - Highlight special events in the notification
3. System publishes all shifts simultaneously
4. ONE notification is sent to all active users with:
   - Total shift count and date range
   - Highlights of special events (e.g., "Lot Setup Nov 27, Tree Delivery Dec 3 & 10")
5. All shifts become visible and available for signup

**Outcome:** 
- Users receive a single comprehensive notification (not individual notifications per shift)
- Signup period officially begins
- Special event shifts are prominently marked in the app

---

### Use Case 24: Committee Adds Individual Shift After Publishing

**Actors:** Committee Member

**Description:** Committee adds a single shift after the season has been published.

**What Happens:**
1. Unexpected need arises (weather changes, special event, etc.)
2. Committee member creates a single new shift
3. Shift is published immediately (not draft)
4. Individual notification is sent to eligible users

**Outcome:** New shift is added with appropriate notification. This is suitable for unplanned additions during the season.

---

### Use Case 25: Parent Signs Up for Special Event Shift

**Actors:** Parent

**Description:** Parent discovers and signs up for a high-priority special event shift.

**What Happens:**
1. Parent receives notification about schedule publication highlighting special events
2. Opens app and browses shifts
3. Special event shifts display distinctive visual indicators:
   - Star icon
   - "ALL HANDS NEEDED" badge
   - Higher volunteer requirements
   - Special notes (e.g., "Wear work clothes and gloves. Lunch provided.")
4. Parent reviews which family members are available
5. Signs up self and/or scouts for the special event

**Outcome:** Family is registered for high-priority shifts. Committee can monitor fill rates for critical days.

---

## Committee Operations

### Use Case 3: Committee Creates Shifts (Individual)

**Actors:** Committee Member

**Description:** Committee member creates individual shifts outside of bulk generation.

**What Happens:**
1. Committee member accesses shift management
2. Creates a new shift with:
   - Date and time
   - Required number of scouts and parents
   - Location
   - Notes or special instructions
3. Chooses whether to publish immediately or save as draft
4. If published, notification is sent to eligible users

**Outcome:** New shift is available in the system. Users are notified if the shift is published.

---

### Use Case 4: Committee Sends Announcement

**Actors:** Committee Member

**Description:** Committee sends a message to all users or a targeted group.

**What Happens:**
1. Committee member composes a message with:
   - Title
   - Body text
   - Target audience (all users, specific groups)
   - Priority level
2. Sends the message
3. Message is stored in the system
4. Push notifications are sent to all recipients (based on their notification preferences)

**Outcome:** Users receive the announcement and can view it in the Messages section of the app.

---

### Use Case 5: Family Becomes Inactive

**Actors:** Admin

**Description:** Admin deactivates a family that is leaving the troop or no longer participating.

**What Happens:**
1. Admin locates the family in the management interface
2. Initiates deactivation, seeing any warnings about upcoming assignments
3. Confirms deactivation
4. System processes:
   - Family marked as inactive
   - All family members' accounts marked inactive
   - All future assignments are cancelled
   - Shift slots are freed up

**Outcome:** 
- Family members see "Account Inactive" when they open the app
- They cannot access shifts or sign up
- Shift slots are now available for other families
- Family can be reactivated if they return

---

### Use Case 6: Shift Reminders (Automated)

**Actors:** System (automated)

**Description:** System automatically sends reminders to volunteers before their shifts.

**What Happens:**
1. Automated process runs hourly
2. Finds shifts starting in approximately 24 hours
3. For each upcoming shift:
   - Retrieves all confirmed assignments
   - Checks each user's notification preferences
   - Sends reminder to those who have reminders enabled
4. Reminder includes:
   - Shift date and time
   - Link to view shift details

**Outcome:** Volunteers are reminded of their upcoming shifts, reducing no-shows.

---

## Shift Scheduling

### Use Case 8: Scout Views Family Schedule

**Actors:** Claimed Scout

**Description:** A scout with independent access views the family's schedule.

**What Happens:**
1. Scout opens the app and navigates to the Family tab
2. Sees list of all family members with their status (active, unclaimed, etc.)
3. Views all upcoming shifts for the family:
   - Which family member is assigned
   - Date and time
   - Location
4. Can see but not manage other family members' assignments
5. Can only cancel their own assignments

**Outcome:** Scout is aware of family commitments and can coordinate while maintaining independence over their own schedule.

---

### Use Case 9: Parent Signs Up Self for Shift

**Actors:** Parent

**Description:** A parent signs themselves up for an available shift.

**What Happens:**
1. Parent browses available shifts
2. Selects a shift to view details (time, location, current signups, notes)
3. Taps "Sign Up" and selects themselves from the family member list
4. Confirms the signup
5. System validates:
   - Parent's account is active
   - Family is active
   - Shift has open parent slots
   - Parent not already assigned to this shift
6. Assignment is created

**Outcome:** Parent is registered for the shift. Assignment appears in their schedule. Family calendar is updated.

---

### Use Case 10: Parent Signs Up Unclaimed Child for Shift

**Actors:** Parent, Unclaimed Scout

**Description:** A parent signs up their younger child (who doesn't have app access) for a shift.

**What Happens:**
1. Parent browses available shifts
2. Selects a shift and taps "Sign Up"
3. Sees family members available for signup:
   - Self
   - Spouse
   - Unclaimed scouts (available)
   - Claimed scouts (grayed out - independent)
4. Selects the unclaimed scout
5. Confirms the signup
6. System validates parent has family management permissions and scout is unclaimed

**Outcome:** Scout is registered for the shift. Parent can cancel this assignment if needed.

---

### Use Case 11: Parent Cannot Sign Up Claimed Child

**Actors:** Parent, Claimed Scout

**Description:** A parent attempts to sign up their independent teenager but is prevented.

**What Happens:**
1. Parent views a shift and taps "Sign Up"
2. In the family member selector:
   - Claimed scout appears grayed out
   - Tooltip explains: "Manages own schedule. Ask them to sign up."
3. Parent cannot select the claimed scout
4. System enforces the boundary: claimed scouts manage their own schedules

**Outcome:** No assignment created. Parent is informed to ask the scout directly.

---

### Use Case 12: Claimed Scout Signs Self Up

**Actors:** Claimed Scout

**Description:** A scout with independent access signs themselves up for a shift.

**What Happens:**
1. Scout browses available shifts
2. Selects a shift and views details (including who's already signed up)
3. Taps "Sign Up"
4. Sees confirmation (no family member selector—can only sign up self)
5. Confirms the signup

**Outcome:** 
- Scout is registered for the shift
- Parents can SEE the assignment in family calendar
- Parents CANNOT cancel the assignment—that's the scout's responsibility

---

### Use Case 13: Parent Cancels Own Assignment

**Actors:** Parent

**Description:** A parent cancels their own shift assignment.

**What Happens:**
1. Parent views their upcoming shifts
2. Selects the shift they need to cancel
3. Taps "Cancel Signup"
4. Sees warning that the shift will need another volunteer
5. Confirms cancellation
6. Assignment is deleted
7. Shift slot becomes available

**Outcome:** Parent's assignment is removed. Committee may be notified to find a replacement.

---

### Use Case 14: Parent Cancels Unclaimed Child's Assignment

**Actors:** Parent, Unclaimed Scout

**Description:** A parent cancels a shift for their young child.

**What Happens:**
1. Parent views family schedule
2. Sees unclaimed child's assignment
3. "Cancel Assignment" option is available (because child is unclaimed)
4. Parent confirms cancellation
5. Assignment is deleted

**Outcome:** Scout's assignment is cancelled. Parent maintains management control over unclaimed children.

---

### Use Case 15: Parent Cannot Cancel Claimed Child's Assignment

**Actors:** Parent, Claimed Scout

**Description:** A parent attempts to cancel their independent teenager's assignment but is prevented.

**What Happens:**
1. Parent views family schedule
2. Sees claimed child's assignment
3. No "Cancel Assignment" option is available
4. Message indicates: "This person manages their own schedule"
5. Parent must ask the scout directly to cancel

**Outcome:** Scout's independence is preserved. Assignment remains unchanged.

---

### Use Case 16: Claimed Scout Cancels Own Assignment

**Actors:** Claimed Scout

**Description:** A scout cancels their own shift assignment.

**What Happens:**
1. Scout views their upcoming shifts
2. Selects the shift to cancel
3. Taps "Cancel Signup"
4. Sees warning about responsibility
5. Confirms cancellation
6. Assignment is deleted

**Outcome:** 
- Scout's assignment is removed
- Parents receive informational notification
- Committee may be notified to find replacement
- Scout takes responsibility for finding coverage

---

### Use Case 17: Signup Prevented - Shift Full

**Actors:** Any User

**Description:** A user attempts to sign up for a shift that has no available slots.

**What Happens:**
1. User views a shift that shows as "Full"
2. Sees complete roster of who's assigned
3. "Sign Up" button is disabled or not visible
4. Message indicates the shift is at capacity

**Outcome:** No assignment created. User can browse other available shifts.

---

### Use Case 18: Signup Prevented - Already Signed Up

**Actors:** Any User

**Description:** A user attempts to sign up for a shift they're already on.

**What Happens:**
1. User views a shift they're already assigned to
2. Instead of "Sign Up" button, sees "You're signed up!"
3. Option to "Cancel Signup" is available
4. No duplicate signup is possible

**Outcome:** System prevents duplicate assignments.

---

### Use Case 19: Signup Prevented - Inactive Family

**Actors:** User from deactivated family

**Description:** A user from a deactivated family attempts to use the app.

**What Happens:**
1. User opens the app
2. System detects their account is inactive
3. User sees "Account Inactive" screen
4. No access to shifts or scheduling features
5. Only options are to sign out or contact admin

**Outcome:** Inactive accounts cannot perform any scheduling actions.

---

## Multi-Household Support

### Use Case 26: Divorced Parents - Scout in Two Households

**Actors:** Mom, Dad, Step-Mom, Scout

**Description:** A scout whose parents are divorced belongs to two separate households in the system.

**Setup Process:**
1. Admin creates separate household invite codes for each parent
2. Mom sets up "Smith-Johnson Household" and adds scouts
3. System generates household link codes for each scout
4. Mom shares link codes with Dad (via direct communication)
5. Dad sets up "Smith Household" with Step-Mom
6. Dad uses link codes to add the scouts to his household
7. Step-Mom joins Dad's household and gains management permissions

**How Scheduling Works:**
- Scout appears in BOTH households
- Either household can sign the scout up for shifts
- ALL assignments are visible to BOTH households
- This prevents double-booking: if Mom signs up scout for Dec 15, Dad sees it
- Permission boundary: Each household can only cancel assignments they created
- If Mom signs up the scout, Dad cannot cancel it (and vice versa)

**Outcome:**
- Scout has one profile visible in both households
- Coordination happens naturally through shared visibility
- Each household maintains independence in what they can manage
- Step-parents have full management rights within their household

---

## Attendance Tracking

### Use Case 27: Parent Checks Self In

**Actors:** Parent

**Description:** A parent arrives at their shift and checks in using the app.

**What Happens:**
1. Parent arrives at the tree lot within 15 minutes of shift start
2. Opens app and sees current shift with "CHECK IN NOW" button active
3. Taps "Check In"
4. System validates the parent is assigned and timing is appropriate
5. Check-in is recorded with timestamp
6. Parent sees confirmation with their check-in time
7. Timer shows time on shift

**Outcome:** 
- Parent is marked as checked in
- Committee can see they're present
- Parent can now check in scouts who don't have phones

---

### Use Case 28: Parent Checks In Scout (No Phone)

**Actors:** Checked-In Parent, Scout without phone

**Description:** A parent who is already checked in can check in scouts who arrive at the shift.

**What Happens:**
1. Scout arrives at the tree lot
2. Parent (already checked in) views the current shift roster
3. Sees list of assigned volunteers with pending/checked-in status
4. Taps on the arriving scout's name
5. Taps "Check In" for that scout
6. System validates:
   - Parent is checked in to this shift
   - Scout is assigned to this shift
   - Scout is not already checked in
7. Scout's check-in is recorded with parent noted as the person who checked them in

**Outcome:**
- Scout is marked as checked in
- Scout's parents (in any household) can see they checked in
- Audit trail shows which parent performed the check-in
- Works for scouts from any family, not just the parent's own children

---

### Use Case 29: Scout Checks Self In (Has Phone)

**Actors:** Claimed Scout with phone

**Description:** A scout who has the app on their own phone checks themselves in.

**What Happens:**
1. Scout arrives at tree lot within check-in window
2. Opens app and sees current shift
3. Taps "Check In"
4. Check-in is recorded as self-check-in
5. Scout sees confirmation

**Outcome:**
- Scout is marked as checked in
- Parents in all households can see the scout checked in
- Self-check-in is recorded

---

### Use Case 30: Parent Checks Out Scout at End of Shift

**Actors:** Checked-In Parent, Scout

**Description:** At the end of a shift, a parent checks out a scout who doesn't have a phone.

**What Happens:**
1. Shift ends
2. Parent opens shift roster showing current status
3. Checks themselves out first (sees hours worked confirmation)
4. Taps on scout's name and taps "Check Out"
5. Confirmation shows hours the scout worked
6. System records check-out with parent noted as the person who checked them out

**Outcome:**
- Hours worked are calculated and recorded for both
- Complete attendance record for the shift
- Scout's parents can see the completed shift with hours

---

### Use Case 31: Committee Reviews Shift Attendance

**Actors:** Committee Member

**Description:** Committee reviews attendance for a completed shift to handle stragglers.

**What Happens:**
1. Committee opens shift attendance view
2. Sees summary: how many checked in, checked out, still checked in, pending/no-show
3. Reviews individual records showing:
   - Who checked in and when
   - Who checked out and when
   - Who checked them in (if done by another person)
   - Hours worked
4. For volunteers who forgot to check out:
   - Sets check-out time to shift end
   - Adds note explaining the correction
5. For volunteers who didn't show:
   - Marks as "No Show"
   - Adds follow-up note

**Outcome:**
- All attendance records are complete
- Hours are calculated for everyone
- No-shows are flagged for follow-up
- Audit trail is preserved

---

### Use Case 32: Viewing Attendance History (Parent)

**Actors:** Parent

**Description:** A parent views the attendance history for their household.

**What Happens:**
1. Parent opens "History" tab
2. Sees household summary:
   - Total shifts worked
   - Total hours across the family
3. Sees breakdown by person:
   - Each family member's shift count and hours
4. Can tap on any person to see detailed shift history:
   - Each shift with date, time, hours worked
   - Who performed check-in/check-out

**Outcome:** Parent has full visibility into family participation and can verify hours for troop requirements.

---

## Walk-In Coverage

### Use Case 33: Walk-In Covers for No-Show

**Actors:** Committee Member, Volunteer covering for no-show

**Description:** When a scheduled volunteer doesn't show up, someone else steps in.

**What Happens:**
1. Shift is in progress and scheduled volunteer hasn't arrived
2. Another volunteer (e.g., just finished prior shift) offers to stay and cover
3. Committee member adds the volunteer as a "walk-in":
   - Searches for the volunteer
   - Adds them with a note explaining the situation
4. Walk-in is automatically checked in at time of addition
5. Original no-show is marked as such with explanation
6. Walk-in works and checks out normally

**Outcome:**
- Walk-in volunteer gets credit for hours worked
- No-show is documented for follow-up
- Shift maintains adequate staffing
- Clear audit trail of what happened

---

### Use Case 34: Checked-In Parent Adds Walk-In Scout

**Actors:** Checked-In Parent, Unscheduled Scout

**Description:** A parent who is already working a shift adds an unscheduled scout who offers to help.

**What Happens:**
1. Shift is in progress and parent is checked in
2. An unscheduled scout arrives (e.g., picking up a sibling) and offers to help
3. Parent can add them as a walk-in without involving committee:
   - Taps "Add Walk-In" on shift roster
   - Searches for and selects the scout
   - Adds a note (optional)
4. Scout is immediately checked in as a walk-in
5. Scout works and is checked out by the parent

**Key Point:** Checked-in parents can add walk-ins to their own shift without committee involvement. This empowers on-the-ground decision making when extra help is available.

**Outcome:**
- Scout gets credit for hours worked
- Walk-in is clearly marked in records
- Parent who added the walk-in is recorded
- No committee approval needed

---

### Use Case 35: Scout from Prior Shift Extends as Walk-In

**Actors:** Scout who just finished their shift

**Description:** A scout who just finished their scheduled shift stays to help with the next shift.

**What Happens:**
1. Scout finishes and checks out of their scheduled shift
2. Next shift needs help
3. Scout offers to stay longer
4. Parent on next shift adds scout as walk-in
5. Scout works additional hours
6. Scout checks out when done

**Outcome:**
- Scout credited for both shifts separately
- Clear distinction between scheduled time and walk-in time
- Both households (if applicable) see all hours

---

## Hours Tracking & Leaderboards

### Use Case 36: Scout Views Personal Hours and Stats

**Actors:** Claimed Scout

**Description:** A scout views their personal participation statistics.

**What Happens:**
1. Scout opens "My Stats" tab
2. Sees personal summary:
   - Total hours worked
   - Number of shifts completed
   - Average hours per shift
   - Rank among all volunteers
3. Sees family summary:
   - Combined family hours
   - Family rank among all families
4. Can view list of recent shifts with hours for each

**Outcome:** Scout knows their standing and can track their participation throughout the season.

---

### Use Case 37: Parent Views Individual Leaderboard

**Actors:** Parent

**Description:** A parent views the ranking of all volunteers by hours worked.

**What Happens:**
1. Parent opens "Leaderboard" tab
2. Sees individual leaderboard showing:
   - Rank, name, hours, shift count
   - Top 10 or more volunteers
   - Their own position highlighted (with "YOU" indicator)
3. Can identify top contributors in the troop

**Outcome:** Creates friendly competition and recognition for participation.

---

### Use Case 38: Parent Views Family Leaderboard

**Actors:** Parent

**Description:** A parent views the ranking of families by combined hours.

**What Happens:**
1. Parent switches to "Family" view on leaderboard
2. Sees family leaderboard showing:
   - Rank, family name, total hours, shift count
   - Their own family highlighted
3. Can tap on their family to see breakdown by member:
   - Each person's contribution to the total
   - Hours are deduplicated for scouts in multiple households

**Important Note:** For scouts in multiple households, their hours count once toward the family total, not doubled.

**Outcome:** Families can see their combined contribution and how they compare to others.

---

### Use Case 39: Committee Views Season Statistics

**Actors:** Committee Member

**Description:** Committee views overall participation metrics for the season.

**What Happens:**
1. Committee opens "Season Stats"
2. Sees overall summary:
   - Total volunteers
   - Total families
   - Total hours worked
   - Total shifts completed
3. Sees shift coverage stats:
   - Percentage of scheduled vs. walk-in assignments
   - No-show rate
4. Sees top contributors in each category
5. Can drill down into detailed reports

**Outcome:** Committee has visibility into troop participation and can identify top contributors for recognition.

---

## End-of-Season Reports

### Use Case 40: Committee Generates Scout Bucks Report

**Actors:** Committee Member, Treasurer

**Description:** At season end, committee generates a report for calculating Scout Bucks credits.

**Context:** Scout Bucks are earned credits scouts can use to offset costs of Summer Camp and other troop trips. The amount is based on:
- Hours the scout personally worked
- Hours worked by the scout's family members (parents, step-parents, guardians)

**What Happens:**
1. Committee opens "Reports" section
2. Selects "Scout Bucks Report" for the completed season
3. Generates the report
4. Report shows for each scout:
   - Scout's own hours and shift count
   - Family member hours (broken down by person)
   - Total combined hours
5. Committee can view detailed breakdown or export to CSV
6. CSV file can be opened in spreadsheet for final calculation:
   - Committee determines hourly rate based on total profit
   - Formula calculates Scout Bucks per scout

**Important Calculation Rules:**
- Each scout gets credit for ALL family member hours (not split between siblings)
- For divorced families: Parent hours are attributed to all their scouts
- Step-parent hours are attributed to scouts in their household
- Scout's own hours are counted once even if in multiple households

**Outcome:** Committee has complete data needed to calculate earned credits. Actual dollar calculation is done in spreadsheet based on fundraiser results.

---

## Schedule Management & Staffing Views

### Use Case 41: Committee Views Week Schedule with Staffing Levels

**Actors:** Committee Member

**Description:** Committee views the entire week's schedule with visual indicators of staffing status.

**What Happens:**
1. Committee opens "Week View"
2. Sees week summary:
   - Total shifts
   - How many fully staffed vs. understaffed vs. critical
3. Scrolls through each day seeing:
   - Each shift with time and location
   - Visual progress bars showing scout and parent fill rates
   - Status indicators: FULL, OK, LOW, CRITICAL
   - Special event shifts marked with star icon
   - List of who's signed up
4. Can tap any shift for full details
5. Can navigate to other weeks using arrows or picker

**Staffing Levels:**
- **FULL** - 100% of required volunteers signed up
- **OK** - Above threshold (e.g., 80%+)
- **LOW** - Below threshold but not critical
- **CRITICAL** - Significantly understaffed, needs immediate attention

**Outcome:** Committee has at-a-glance visibility into where coverage is needed.

---

### Use Case 42: Committee Reviews Staffing Alerts Dashboard

**Actors:** Committee Member

**Description:** Committee views prioritized list of shifts that need attention.

**What Happens:**
1. Committee sees alert badge indicating shifts needing attention
2. Opens "Staffing Alerts" dashboard
3. Sees prioritized list:
   - Grouped by severity (Critical, Low)
   - Ordered by date (soonest first)
   - Shows exact volunteer shortfall
4. For each understaffed shift:
   - Can send targeted reminder message
   - Can view full shift details
   - Can share signup link directly
5. As families sign up, alerts update automatically

**Outcome:** Committee can quickly identify and address staffing issues before they become problems.

---

### Use Case 43: Parent Uses Week View to Find Available Shifts

**Actors:** Parent

**Description:** A parent looking to sign up uses the week view to find shifts that need help.

**What Happens:**
1. Parent opens "Schedule" tab with Week View
2. Sees staffing indicators for each shift:
   - Green checkmarks on fully-staffed shifts
   - Yellow indicators on shifts needing help
   - Red indicators on critical shifts
3. Quickly identifies shifts with the most need
4. Taps a critical shift to see details and "We need your help!" messaging
5. Signs up family members for high-need shifts
6. Receives confirmation thanking them for helping where most needed

**Outcome:** Parents can easily find and fill shifts that most need coverage, rather than just picking convenient times.

---

### Use Case 44: App Loads Season and Week Navigation

**Actors:** Any User

**Description:** When a user opens the app, the system determines current season and appropriate week to display.

**What Happens:**
1. User opens the app
2. System determines:
   - Current active season (or most recent if between seasons)
   - Which week of the season is current
   - All valid weeks for navigation
3. App loads the current week's schedule by default
4. User sees week navigation bar with:
   - Current week displayed
   - Arrows to navigate to adjacent weeks
   - Dropdown picker to jump to any week in the season
5. Week picker shows shift count for each week
6. Navigation is constrained to valid season dates

**Off-Season Behavior:**
- If no active season: Shows most recent completed season
- If only draft exists: Users see "Schedule not yet published" (Committee can still see draft)

**Outcome:** Users always land on relevant content and can easily navigate the full season.

---

## Profile Management

### Use Case 45: User Updates Profile Photo

**Actors:** Any authenticated user (Parent or Claimed Scout)

**Description:** A user adds or updates their profile photo.

**What Happens:**
1. User navigates to their profile settings
2. Taps on profile photo area (shows placeholder if no photo set)
3. Chooses to take a new photo or select from photo library
4. Crops/adjusts the image as needed
5. Confirms the selection
6. Photo is uploaded and associated with their profile
7. New photo appears throughout the app wherever the user is displayed (shift rosters, leaderboards, family views)

**Outcome:** User's profile photo is updated and visible to other users throughout the app.

---

### Use Case 46: User Edits Display Name

**Actors:** Any authenticated user (Parent or Claimed Scout)

**Description:** A user updates their display name.

**What Happens:**
1. User navigates to their profile settings
2. Taps on their display name field
3. Edits the name (first name, last name, or preferred display name)
4. Saves the change
5. Updated name appears throughout the app

**Note:** The user's email address is NOT editable. Email is obtained from the authentication provider (Apple or Google) during sign-in and is treated as verified and read-only.

**Outcome:** User's display name is updated throughout the system.

---

### Use Case 47: User Deletes Own Account

**Actors:** Any authenticated user (Parent or Claimed Scout)

**Description:** A user requests deletion of their own account through the mobile app.

**Preconditions vary by role:**

**For Parents:**
- If the parent is the ONLY manager in a household with unclaimed scouts, deletion is blocked
- Parent must first either:
  - Have another parent/spouse claim their profile and become a co-manager
  - Have all scouts claim their own profiles (becoming independent)
  - Remove the unclaimed scout profiles from the household
- If other managers exist in the household, or all scouts are claimed, deletion proceeds

**For Claimed Scouts:**
- Can always delete their own account
- Scout is removed from all households they belong to

**What Happens:**
1. User navigates to profile settings
2. Taps "Delete My Account"
3. System checks deletion eligibility:
   - If blocked (only manager with unclaimed scouts): Shows explanation and required steps
   - If allowed: Proceeds to confirmation
4. User sees warning explaining what will happen:
   - All future shift assignments will be cancelled
   - Historical attendance records will be preserved for reporting
   - Account will be marked as deleted
   - They will be signed out and unable to sign back in
5. User confirms deletion (may require re-authentication for security)
6. System processes deletion:
   - Removes authentication linking (Apple/Google account association)
   - Removes verified email address from profile
   - Preserves display name for historical reporting
   - Records deletion timestamp
   - Sets account status to "deleted"
   - Cancels all future assignments (frees up shift slots)
   - Removes user from household member lists
   - Signs user out of the app
7. User sees confirmation and is returned to the welcome screen

**What is Preserved:**
- Display name (for historical reports and Scout Bucks calculations)
- Historical attendance records (hours worked)
- Deletion timestamp
- User ID (for referential integrity)

**What is Removed:**
- Authentication provider linking
- Verified email address
- Profile photo
- Push notification tokens
- Future assignments

**Outcome:** Account is soft-deleted, user can no longer access the system, but historical data is preserved for reporting purposes.

---

## Privacy & Data Requests

The following use cases support privacy regulation compliance (such as GDPR and CCPA). These capabilities are NOT available directly in the iOS or Android mobile apps. Users must submit these requests through a separate process (email to troop leadership or a designated privacy contact).

### Use Case 48: User Requests Data Export

**Actors:** Any user (current or former), Admin/Privacy Contact

**Description:** A user requests a complete export of all personal data the system holds about them.

**Request Process:**
1. User contacts the troop's designated privacy contact (via email or other channel outside the app)
2. User provides identifying information to verify their identity
3. Privacy contact verifies the request is legitimate

**What Happens:**
1. Admin/Privacy contact initiates data export for the user
2. System compiles all data associated with the user:
   - Profile information (name, email if still present, photo)
   - Household memberships
   - All shift assignments (past and future)
   - All attendance records (check-in/out times, hours worked)
   - Walk-in records
   - Any messages sent or received
   - Account activity history
3. Data is exported in a portable format (JSON or CSV)
4. Export is securely delivered to the user

**Outcome:** User receives a complete copy of all personal data held by the system, fulfilling data portability requirements.

---

### Use Case 49: User Requests Permanent Data Removal

**Actors:** Any user (current or former), Admin/Privacy Contact

**Description:** A user requests permanent and complete removal of all their personal data from the system ("right to be forgotten").

**Request Process:**
1. User contacts the troop's designated privacy contact (via email or other channel outside the app)
2. User provides identifying information to verify their identity
3. Privacy contact verifies the request is legitimate
4. Privacy contact explains the implications:
   - All data will be permanently deleted, not just anonymized
   - Historical hours will be removed from reports
   - This may affect Scout Bucks calculations for scouts in the user's household
   - This action cannot be undone

**What Happens:**
1. Admin/Privacy contact initiates permanent deletion
2. System permanently removes all data:
   - User profile document is deleted (not just marked deleted)
   - Display name is removed from all historical records or replaced with "Deleted User"
   - Attendance records are either deleted or anonymized
   - Profile photo is permanently deleted from storage
   - User is removed from all household records
   - Any assignments (past and future) are deleted or anonymized
3. System logs that a deletion request was fulfilled (without identifying the deleted user)

**Important Considerations:**
- This affects reporting accuracy (Scout Bucks totals may change)
- If user was a parent, their contributed hours are removed from their scouts' totals
- Admin should consider timing (ideally after season ends and reports are finalized)
- May want to export data first (Use Case 48) before permanent deletion

**Outcome:** All personal data is permanently removed from the system, fulfilling right-to-erasure requirements. Some aggregate statistics may be affected.

---

## Permission Summary

| Action | Admin | Committee | Parent (Primary) | Spouse | Scout (Unclaimed) | Scout (Claimed) |
|--------|-------|-----------|------------------|--------|-------------------|-----------------|
| Generate invite codes | ✓ | | | | | |
| Create/manage shifts | ✓ | ✓ | | | | |
| Send messages | ✓ | ✓ | | | | |
| Add family members | ✓ | | ✓ | ✓* | | |
| Edit unclaimed profiles | ✓ | | ✓ | ✓* | | |
| Sign up unclaimed for shifts | ✓ | ✓ | ✓ | ✓* | | |
| Sign up self for shifts | ✓ | ✓ | ✓ | ✓ | | ✓ |
| Cancel own assignments | ✓ | ✓ | ✓ | ✓ | | ✓ |
| Cancel unclaimed's assignments | ✓ | ✓ | ✓ | ✓* | | |
| View family schedule | ✓ | ✓ | ✓ | ✓ | | ✓ |
| Check in others on shift | ✓ | ✓ | ✓ | ✓ | | |
| Add walk-ins | ✓ | ✓ | ✓** | ✓** | | |
| Deactivate families | ✓ | | | | | |
| Edit own display name | ✓ | ✓ | ✓ | ✓ | | ✓ |
| Edit own profile photo | ✓ | ✓ | ✓ | ✓ | | ✓ |
| Delete own account | ✓ | ✓ | ✓*** | ✓*** | | ✓ |
| Process data export requests | ✓ | | | | | |
| Process permanent deletion requests | ✓ | | | | | |

*If canManageFamily = true  
**Must be checked in to the shift  
***Subject to eligibility rules (cannot delete if only manager with unclaimed scouts)

---

## Business Rules

This section consolidates the key business rules that govern system behavior across use cases.

### Multi-Household Rules

**Household Structure:**
- Each household is independently managed by one or more parents/guardians
- Scouts can be members of multiple households simultaneously (e.g., Mom's household AND Dad's household)
- Each household manager can sign up scouts in their household for shifts

**Two Types of Codes:**
- **Claim Code:** Used by a scout to claim their own profile and gain independent access
- **Household Link Code:** Used by a parent to add an existing scout to an additional household

**Household Link Code Security:**
- Link codes are cryptographically random and cannot be guessed
- Link codes can be regenerated by household managers (invalidates the old code)
- There is no search feature for scouts—you must have the link code to add a scout
- Link codes require direct communication between parents, which is appropriate for custody situations
- Each scout has their own link code, so sharing one child's code doesn't expose siblings

**Cross-Household Assignment Visibility:**
- Shift assignments are visible to ALL of the scout's households
- This prevents double-booking: If Mom signs up scout for Dec 15, Dad sees it in his view
- Coordination happens naturally through shared visibility

**Cross-Household Cancellation Rules:**
- Parents can only cancel assignments made by their own household
- If Mom signs up the scout, Dad cannot cancel it (and vice versa)
- Each household maintains independence in what they can manage

---

### Shift Scheduling Rules

**Signup Validation (in order):**
1. User must be authenticated
2. User's account must be active
3. User's family/household must be active
4. Shift must be open (not cancelled or in the past)
5. Target must not already be assigned to this shift
6. Shift must have available slots for the target's role (scout or parent)
7. If signing up someone else:
   - Target must be in the same family/household
   - User must have canManageFamily permission
   - Target must be unclaimed (claimed scouts manage themselves)

**Cancellation Validation:**
- Users can always cancel their own assignments
- Committee and Admin can cancel any assignment (override capability)
- Parents can cancel unclaimed family members' assignments
- Parents CANNOT cancel claimed scouts' assignments
- In multi-household situations: Can only cancel assignments your household created

---

### Attendance & Check-In Rules

**Timing Windows:**
- Check-in is allowed starting 15 minutes before shift start
- Check-out is allowed up to 2 hours after shift ends (grace period for forgotten checkouts)

**Self Check-In:**
- Anyone assigned to a shift can check themselves in/out

**Parent Checking In Others:**
1. Parent must have role "parent"
2. Parent must be assigned to the SAME shift as the target
3. Parent must check themselves in FIRST before checking in others
4. Target must be a scout (parents cannot check in other parents)
5. Target must be assigned to the shift
6. Target must not already be checked in

**Committee/Admin Override:**
- Committee and Admin can check anyone in/out for any shift
- Can correct forgotten checkouts
- Can mark no-shows

---

### Walk-In Coverage Rules

**When Walk-Ins Can Be Added:**
- Walk-ins can ONLY be added to shifts that are in progress (started but not ended)
- Cannot add walk-ins before shift begins or after shift ends

**Who Can Add Walk-Ins:**
- Committee and Admin can add walk-ins to any in-progress shift
- Checked-in parents can add walk-ins to their current shift without committee involvement

**Walk-In Processing:**
- Walk-in assignments are automatically checked in at time of creation
- Walk-in assignments are marked with assignmentType = "walk_in" for tracking
- Walk-in hours are credited separately from scheduled hours in reporting

---

### Notification Rules

**Draft vs Published Shifts:**
- Draft shifts do NOT generate notifications (prevents spam during bulk creation)
- Only published shifts are visible to regular users

**Bulk Schedule Publishing:**
- Publishing an entire season generates ONE summary notification to all users
- The notification highlights special events (Lot Setup, Tree Delivery, etc.)
- Users receive one comprehensive notification, not 70+ individual ones

**Individual Shift Additions:**
- Shifts added individually after season publication DO generate notifications
- This is appropriate for unplanned additions during the season

**Shift Reminders:**
- Automated reminders are sent approximately 24 hours before shifts
- Users can opt out of reminders in notification preferences

---

### Hours Tracking & Leaderboard Rules

**Individual Hours:**
- Each person's hours are calculated from check-in to check-out
- Walk-in hours and scheduled hours are both counted
- Hours are tracked per shift for detailed history

**Family Leaderboard Deduplication:**
- For scouts in multiple households, hours are counted ONCE toward the family total (not doubled)
- All household members in the family unit contribute to the same family total
- A "familyUnitId" groups related households together for leaderboard purposes

---

### Scout Bucks Calculation Rules

Scout Bucks credits are based on combined scout + family hours:

**Attribution Rules:**
- Each scout gets credit for ALL family member hours (not split between siblings)
- Parent hours are attributed to ALL of their scouts
- Step-parent hours are attributed to scouts in their household
- Scout's own hours are counted once, even if in multiple households

**Example:**
- Scout Alex worked 12 hours
- Mom Sarah worked 18.5 hours
- Dad John worked 14 hours
- Step-Mom Lisa worked 5.5 hours
- Alex's total for Scout Bucks = 12 + 18.5 + 14 + 5.5 = 50 hours

**Sibling Note:**
- Sister Emma's Scout Bucks would ALSO include Mom's 18.5, Dad's 14, and Step-Mom's 5.5 hours
- Family hours are not split between siblings—each scout benefits from all family participation

---

### Template & Schedule Rules

**Template Independence:**
- Changes to templates do NOT affect previously generated schedules
- Each season's shifts are independent once created
- Historical data remains accurate even if templates are updated

**Special Event Handling:**
- Special event shifts (Lot Setup, Tree Delivery) are created with higher volunteer requirements
- Special events show distinctive visual indicators in the app (star icon, "ALL HANDS NEEDED" badge)
- Special events are highlighted in the publish notification

---

### Profile Management Rules

**Email Address:**
- Email address is obtained from the authentication provider (Apple or Google) during sign-in
- Email is treated as verified by the provider
- Email is READ-ONLY and cannot be edited by the user
- To change email, user would need to sign in with a different Apple/Google account

**Display Name:**
- Users can edit their own display name at any time
- Name changes are reflected throughout the app
- Historical records retain the name as it was at time of the activity

**Profile Photo:**
- Users can add, change, or remove their profile photo
- Photos are displayed on shift rosters, leaderboards, and family views
- Photo is removed during account deletion

---

### Account Deletion Rules

**Soft Delete Approach:**
When a user deletes their account through the app, the system performs a "soft delete":

| Data Element | Action |
|--------------|--------|
| Authentication linking | Removed (Apple/Google association cleared) |
| Verified email address | Removed |
| Display name | Preserved (for historical reporting) |
| Profile photo | Removed |
| Push notification tokens | Removed |
| Future assignments | Cancelled (shift slots freed) |
| Historical attendance | Preserved (hours, check-in/out times) |
| Account status | Set to "deleted" |
| Deletion timestamp | Recorded |
| User ID | Preserved (referential integrity) |

**Parent Deletion Eligibility:**

| Scenario | Can Delete? | Reason |
|----------|-------------|--------|
| Only manager with unclaimed scouts | ❌ No | Would orphan managed profiles |
| Only manager, all scouts claimed | ✓ Yes | Claimed scouts are independent |
| Co-manager exists (spouse/other parent) | ✓ Yes | Other manager continues |
| No scouts in household | ✓ Yes | No dependencies |

**Before Deleting (if blocked):**
Parent must take one of these actions:
1. Have another adult join and become co-manager
2. Have all scouts claim their profiles (become independent)
3. Remove unclaimed scout profiles from the household

**Scout Deletion:**
- Claimed scouts can always delete their own account
- Scout is removed from all households they belong to
- Historical hours are preserved for Scout Bucks calculations

---

### Privacy & Data Request Rules

**Data Export Requests:**
- Any user (current or former) can request a complete export of their data
- Requests are handled outside the mobile app (via email to privacy contact)
- Identity verification is required before fulfilling requests
- Export includes all personal data: profile, assignments, attendance, messages

**Permanent Deletion Requests ("Right to be Forgotten"):**
- Any user can request complete and permanent removal of all data
- Requests are handled outside the mobile app (via email to privacy contact)
- This is MORE extensive than in-app account deletion:
  - In-app deletion: Soft delete, preserves name and historical hours
  - Permanent deletion: Removes or anonymizes ALL data including historical records
- Permanent deletion affects reporting (Scout Bucks totals may change)
- Admin should warn user of implications before proceeding
- Cannot be undone once completed

---

## Document History

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | Dec 2024 | Initial use cases document extracted from architecture specification |
| 1.1 | Dec 2024 | Added Use Case 0: System Bootstrap for creating the first administrator |
| 1.2 | Dec 2024 | Added comprehensive Business Rules section consolidating multi-household rules, scheduling rules, attendance/check-in rules, walk-in coverage rules, notification rules, hours tracking/leaderboard rules, Scout Bucks calculation rules, and template/schedule rules |
| 1.3 | Dec 2024 | Added Profile Management use cases (UC 45-47): profile photo, display name editing, account deletion with soft-delete approach. Added Privacy & Data Requests use cases (UC 48-49): data export and permanent removal requests handled outside the mobile app. Added business rules for profile management, account deletion eligibility, and privacy request handling |

---

**End of Document**
